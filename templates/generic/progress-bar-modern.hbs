<div class="progress-wrapper">
  <svg viewBox="-2 -4 102 24"
    style="overflow: visible"
    xmlns="http://www.w3.org/2000/svg"> {{!-- Extra padding for strokes --}}
    <defs>
      <path id="bar-path"
        d="M2 0 H20 L23 3 H98 L100 5 V11 L98 13 H80 L77 10 H2 L0 8 V2 Z" />
      <!-- 45-degree corner path -->
      <clipPath id="clip-bar">
        <use href="#bar-path" />
      </clipPath>

      <!-- Glass background gradient -->
      <linearGradient id="glass" x1="0" y1="0" x2="0.1" y2="1">
        <stop offset="0%" stop-color="rgba(255,255,255,0.25)" />
        <stop offset="50%" stop-color="rgba(255,255,255,0.08)" />
        <stop offset="100%" stop-color="rgba(255,255,255,0.15)" />
      </linearGradient>

      <!-- Progress gradient -->
      <linearGradient id="progressGradient{{id}}" x1="0" y1="0" x2="1" y2="0">
        <stop offset="0%" stop-color="{{progressBarColour 0 id}}" />
        <stop offset="70%" stop-color="{{progressBarColour 1 id}}" />
        <stop offset="100%" stop-color="{{progressBarColour 2 id}}" />
      </linearGradient>


      <!-- Glow gradient -->
      <linearGradient id="glowGradient" x1="0" y1="0" x2="1" y2="0">
        <stop offset="0%" stop-color="rgba(255,255,255,0)" />
        <stop offset="50%" stop-color="rgba(255,255,255,0.9)" />
        <stop offset="100%" stop-color="rgba(255,255,255,0)" />
      </linearGradient>
    </defs>


    <!-- Background (glassy, merges with bg) -->
    <use href="#bar-path"
      fill="url(#glass)"
      opacity="1.0" />

    <!-- Progress group -->
    {{#if value}}
      <g clip-path="url(#clip-bar)">
        <!-- Actual progress fill -->
        <rect x="0" y="0" width="{{mul (div value max) 100}}" height="16"
          fill="url(#progressGradient{{id}})"
          class="progress-fill-animation" />

        <!-- Moving glow -->
        <rect x="-120" y="0" width="{{mul (div value max) 100}}" height="16"
          fill="url(#glowGradient)"
          class="glow" />
      </g>
    {{/if}}
    
    {{!-- Outline --}}
    <use href="#bar-path"
      stroke="rgba(255,255,255,0.4)"
      stroke-width="1.2"
      stroke-linejoin="bevel"
      fill="none" />

    {{!-- Informations --}}
    <text x="0" y="17.5" fill="white" font-size="8">{{name}}</text>
    {{#if max}}
      {{#if dynamic}}
        <foreignObject x="0" y="-8" width="100" height="28" overflow="visible">
          <div style="display: flex; justify-content: end; align-items: top;">
            <input xmlns="http://www.w3.org/1999/xhtml" class="svg-progress-input" name="{{name}}" type="number" value="{{value}}" 
              data-id="{{id}}" data-max={{max}} />
            <div class="svg-div-text"> / {{max}}</div>
          </div>
        </foreignObject>
      {{else}}
        <text x="100" y="1.6" fill="white" font-size="8" text-anchor="end">{{value}} / {{max}}</text>
      {{/if}}
    {{/if}}
  </svg>
</div>